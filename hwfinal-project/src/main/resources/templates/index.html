<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Главная</title>
</head>
<body>

</body>
<script defer>
    window.onload= async function (){
        await fetch(
            "http://localhost:8080",
            {
                method: "GET"

            }
        ).then(response=>response.json()).then(json=>{
            let username =json.username;
            let isAdmin = json.isAdmin;
            console.log(username)
            if(username=="unknown"){
                document.body.innerHTML="<h3>Добро пожаловать, вы не авторизовались.</h3>\n" +
                    "<h4><a href=\"/login\">Войти</a></h4>\n" +
                    "<h4><a href=\"/registration\">Зарегистрироваться</a></h4>"
            }
            else if(isAdmin){
                document.body.innerHTML=`<h3>Добро пожаловать, админ ${username}</h3>\n
                    <h4><a href=\"/user_table\">Таблица пользователей</a></h4>\n
                    <h4><a href=\"/logout\">Выйти</a></h4>\n`
            }
            else {
                document.body.innerHTML=`<h3>Добро пожаловать, ${username}</h3>
                    <p>Вы обычный пользователь</p>
                    <h4><a href=""></a></h4>
                    <h4><a href="/logout">Выйти</a></h4>`
            }
        });
    }
</script>
</html>